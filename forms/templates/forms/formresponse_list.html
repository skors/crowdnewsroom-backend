{% extends "./investigation_list.html" %}
{% load i18n %}
{% load forms_tags %}

{% block title %}{% trans "Responses" %}{% endblock %}
{% block headertitle %}
    {% blocktrans with name=form.name %}
        Responses for {{ name }}
    {% endblocktrans %}
{% endblock %}

{% block main %}
  <div class="formresponse-list">
    <table class="table">
        <tr>
            <td>{% trans "Response" %}</td>
            <td>{% trans "Status" %}</td>
            <td>{% trans "Comments" %}</td>
        </tr>
        {% for response in formresponse_list %}
            <tr>
                <td>
                    <a href="{% url "response_details" investigation.slug form.slug response.id %}"
                        style="text-decoration: none">
                        <i class="fa {% response_icon response.status %}"></i>
                        {{ response.json_email }} - {{ response.submission_date }}
                    </a>
                </td>
                <td>{{ response.get_status_display }}</td>
                <td>{{ response.comment_set.count }}</td>
            </tr>
        {% endfor %}
    </table>
      {% if is_paginated %}
        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}">{% trans "previous" %}</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">{% trans "next" %}</a>
                {% endif %}
            </span>
        </div>
    {% endif %}
    <a href="{% url "form_responses_csv" investigation.slug form.slug %}">
      <i class="fa fa-download"></i>
      {% trans "Download data as csv" %}
      </a>
  </div>

{% endblock %}
